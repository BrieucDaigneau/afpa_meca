{% extends "garage/base.html" %}
{% load static %}

{% block content %}

    {% block radio %}
        {% if vehicle_type == "twowheelers" %}
        <div class="row">
            <input class="radio listing btnradio" type="radio" value="Moto" id="motorbike_radio" onclick='javascript:select_twoWheeler(this);' name="optradio" checked="checked"></input>    
            <label for="motorbike_radio" class="checkmark mt-5 col-md-3" id="listing">
                Moto
            </label>
            <input class="radio listing"  type="radio" value="Velo" id="bike_radio" onclick='javascript:select_twoWheeler(this);' name="optradio"></input> 
            <label for="bike_radio" class="checkmark mt-5 col-md-3"  id="listing">
                Velo
            </label>
        </div>
        <hr  id="myhr" >
            {% endif %}
    {% endblock radio %}


    {% if vehicle_type == "twowheelers" or vehicle_type == "motorised" %}    

        <div class="container" id="form">
            <titre class="col-md-12">
                <div class="col-md-12">
                    <h1 id="title" class="title">{% block title %}Création nouveau Véhicule{% endblock title %}</h1>                    
                </div>     
            </titre>
            

                <form class="needs-validation" method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group {% if form.brand.errors %}has-warning has-feedback{% endif %}">
                                <label for="{{ form.brand.id_for_label }}" class="control-label">Marque</label>
                                {{ form.brand }}
                            </div>
                            <div class="invalid-feedback">
                                La saisie de la marque est obligatoire
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group {% if form.model.errors %}has-warning has-feedback{% endif %}">
                                <label for="{{ form.model.id_for_label }}" class="control-label">Modèle</label>
                                {{ form.model }}
                            </div>
                            <div class="invalid-feedback">
                                La saisie du modèle est obligatoire.
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label for="{{ customer_form.license_plate.id_for_label }}" class="control-label">Immatriculation</label>
                            {{ form.license_plate }}
                        </div>
                        <div class="col-md-6">
                            <label for="{{ form.vin.id_for_label }}" class="control-label">Vin</label>
                            {{ form.vin }}
                        </div>
                        <div class="col-md-6">
                            <label for="{{ form.mileage.id_for_label }}" class="control-label">Kilometrage</label>
                            {{ form.mileage }}
                        </div>
                    </div> 

                    <div class="row">
                        <div class="col-md-4">
                            <label for="{{ car_form.circulation_date.id_for_label }}" class="control-label">Date mise en circulation</label>
                            {{ form.circulation_date }}
                        </div>

                        <div class="col-md-4">
                            <label for="{{ car_form.grey_doc_img.id_for_label }}" class="control-label">Carte grise</label>
                            {{ form.grey_doc_img }}
                        </div>

                        <div class="col-md-4">
                            <label for="{{ car_form.insurance_img.id_for_label }}" class="control-label">Carte assurance</label>
                            {{ form.insurance_img }}
                        </div>
                    </div>                        
                </form>
        </div>
    {% endif %}

    {% if vehicle_type == "bike" or  vehicle_type == "twowheelers" %}        
        <div class="container-fluid" >
        {% if vehicle_type == "twowheelers" %}
            <div id="bike" style="display: none">
        {% endif %}
            
                <div class="col-md-12">
                    <div class="col-md-12">
                        <h1 id="title" class="title" >Création nouveau Vélo</h1>
                    </div>     
                </div>

                <div class="col-md-9">
                    <form class="" action="" method="post">
                        {% csrf_token %}
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group {% if bike_form.model_vehicle.errors %}has-warning has-feedback{% endif %}">
                                    <label for="{{ bike_form.model_vehicle.id_for_label }}" class="control-label">Modèle</label>
                                    {% if vehicle_type == "twowheelers" %}
                                        {{ bike_form.model }}
                                    {% endif %}
                                    {% if vehicle_type == "bike" %}
                                        {{form.model}}
                                    {% endif %}
                                    
                                </div>
                                <div class="invalid-feedback">
                                    La saisie du modèle est obligatoire
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                {% if vehicle_type == "twowheelers" %}
            </div>
            {% endif %}
        </div>
    {% endif %}

    <div class="msgError"> {{ internal_error }} </div>  

       
            <div class="row mt-5">
                <div class="col-md-3">
                    <a href="" onClick="history.back()" class="btn btn-primary btn-sm btn-block">Annuler</a>
                </div>
                <div class="col-md-2">
                </div>     
                <div class="col-md-4">   
                {% block back_home %}   
                                <button class="btn btn-primary btn-sm btn-block" type="submit" id="button">Valider et retour Accueil</button>
                {% endblock back_home %}
                </div>        
                <div class="col-md-3">
                    <button class="btn btn-primary btn-sm btn-block" onClick="submitButton()" type="submit">Etape suivante</button>
                </div>
            </div>     
        
    {% if vehicle_type == "bike" or  vehicle_type == "twowheelers" %}        
        <script>
            function select_twoWheeler(){
                if (document.getElementById("motorbike_radio").checked){
                    document.getElementById("bike").style.display = "none";
                    document.getElementById("form").style.display = "block";

                } else if (document.getElementById("bike_radio").checked){
                    console.log(document.getElementById("motorbike_form"))
                    document.getElementById("form").style.display = "none";
                    document.getElementById("bike").style.display = "block";
                }
            }
        </script>
    {% endif %}

{% if bike_form == "None"  %}        
        <script>
            function submitButton(){
                    document.forms[0].submit()
            }
        </script>
{% else %}

    {% block myscript %}
        <script>

            function submitButton(){
                if (document.getElementById("motorbike_radio").checked){
                    document.forms[0].submit()
                } else if (document.getElementById("bike_radio").checked){
                    console.log("kikou")
                    document.forms[1].submit()
                }
            }
        </script>
    {% endblock myscript %}

{% endif %}
    {% block reparation_order_list %}{% endblock reparation_order_list %}
{% endblock content%}