{% extends 'garage/vehicles_list.html' %} {% block search %}

<div class="container">

    <div class="col-md-2">
    </div>
    <div class="row mb-5 mt-3">

        <div class="col-md-2 ">
            <button onClick="car_create()" id="new" value="{{customer_id}}" class="btn btn-sm btn-primary btn-lg btn-block" >Nouveau</button>
        </div>
    </div>
</div>
{% endblock search %} {% block buttons %}


<div class="container">
    <div class="row mt-5">
        
        <a href="{% url 'garage:customer-select' %}" class=" btn btn-sm btn-primary col-md-1" onClick="redirect()">Annuler</a>
        <div class="col-md-3"></div>
        <button class=" btn btn-primary btn-sm col-md-2" onClick="redirect()">Modifier
        </button>
        <div class="col-md-1"></div>
        <button class="  btn btn-primary btn-sm col-md-5" onClick="redirect()">Valider et finaliser
            un ordre de réparation
        </button>
    </div>
</div>




<script type="text/javascript">

    function redirect() {
        window.location = "{% url 'garage:reparation-order-create' 1 %}".replace(1, document.vehicleChecked)
    }

    function car_create() { 

//expression régulière qui récupère l'id client
//[/] = recherche le caractère "/" dans l'ulr
//(d+) = "()" retourne la valeur à l'intérieur des (), "d" cherche un nombre entre [0-9],
// "+" cherche entre 1 et plusieurs fois le paramètre saisi avant 
// window.location.href.match(/[/](\d+)[/]/) retourne un tableau = [/nombre/, nombre]

        let stringToFind = window.location.href.match(/[/](\d+)[/]/)
        window.location = "{% url 'garage:vehicle-create' 1 %}".replace(1, stringToFind[1])
        }
</script> {% endblock buttons %}
</div>