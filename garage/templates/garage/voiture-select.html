{% extends 'garage/liste_vehicules.html' %} {% block recherche %}

<div class="container">
    {% comment %} <div class="row">
        <label class="checkmark ">
            <input type="radio" value="Voiture" id="Voiture" name="optradio" checked="checked">Voiture</label>
        <div class="col-md-1"></div>
        <label class="checkmark">
            <input type="radio" value="Moto" id="Voiture" name="optradio">Moto</label>
        <div class="col-md-1"></div>
        <label class="checkmark">
            <input type="radio" value="Velo" id="Voiture" name="optradio">Velo</label>
    </div> {% endcomment %}

    <div class="col-md-2">
    </div>
    <div class="row mb-5 mt-3">

        <div class="col-md-2 ">
            <button onClick="voiture_create()" id="nouveau" value="{{client_id}}" class="btn btn-sm btn-primary btn-lg btn-block" >Nouveau</button>
        </div>
    </div>
</div>
{% endblock recherche %} {% block bouttons %}


<div class="container">
    <div class="row mt-5">
        
        <a href="{% url 'garage:client-select' %}" class=" btn btn-sm btn-primary col-md-1" onClick="redirect()">Annuler</a>
        <div class="col-md-3"></div>
        <button class=" btn btn-primary btn-sm col-md-2" onClick="redirect()">Modifier
        </button>
        <div class="col-md-1"></div>
        <button class="  btn btn-primary btn-sm col-md-5" onClick="redirect()">Valider et finaliser
            un ordre de réparation
        </button>
    </div>
</div>




<script type="text/javascript">

    function redirect() {
        window.location = "{% url 'garage:ordre_reparation' 1 %}".replace(1, document.vehiculeChecked)
    }

    function voiture_create() { 

        // TODO : exercice : ecrire le code ci-dessous en expression régulière
        // absolument
        let currentHref = window.location.href
        const ch = "{% url 'garage:voiture-select' 1 %}"
        let chaineATrouver = ch.substr(0, ch.length - 2)
        let i = currentHref.indexOf(chaineATrouver)
        let pk = window.location.href.substring(i+ chaineATrouver.length, currentHref.length - 1)
        window.location = "{% url 'garage:voiture-create' 1 %}".replace(1, pk)

        }
</script> {% endblock bouttons %}
</div>